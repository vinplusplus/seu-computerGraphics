# 东南大学-计算机图形学大作业-3D迷宫

本程序是我依靠claude3.5在两周内写好的基于three.js-r169的3D迷宫。  
写完后，我也不知道three.js的语法。  
大部分时间我在提要求、拷打claude和DEBUG。  
大部分代码都没问题，但在最后两天出了个claude怎么也修改不了的BUG。  
我不得不把代码全看了一遍，然后自己debug了两天。

## 运行步骤：
本程序的开发环境是配置了live server插件的vscode。
1. 如已下载vscode且已安装了live server插件
2. 请用vscode打开
3. 进入"demo\index.html"
4. 在打开的index.html内任意位置点击右键，选择"open with live server"
5. 程序即可运行。

## 算力要求：
本程序对电脑显卡有要求，请至少运行在1660 Ti上。  
如算力不够会导致程序卡顿严重。
如卡顿，这不是程序的问题而是你的电脑问题。

## 操作指南：
1. 启动程序后，点击"开始"按钮，进入游戏。
2. 使用键盘 WASD 控制角色移动：
   - W：前进
   - S：后退
   - A：向左转
   - D：向右转
3. 使用键盘方向键 上下左右 控制人物视角：
   - ↑：抬头
   - ↓：低头
   - ←：左扭头
   - →：右扭头
4. 使用鼠标左键控制相机旋转，右键移动相机位置，滚轮控制相机缩放。
5. 通过GUI面板，用户可以实时调整相机、光照、天空和时间的各种参数。
6. 点击"重来"按钮可以重置游戏至初始状态。

## 实现较好的方面：
1. **自由的模式切换**。玩家可以使用第一人称视角和轨道视角自由探索迷宫。玩家可以在任意时刻使用鼠标对场景进行漫游，无论游戏是否开始。如游戏开始，玩家任意点击位移键（w/a/s/d），相机会立刻进入第一人称模式，非常炫酷。
2. **动态光影**。游戏使用实时光影，如玩家开启较高时间流逝速度。可以清晰看到阴影随时间的变化，非常炫酷。
3. **高质量纹理**。墙壁和地面均使用从网上下载的全套高分辨率贴图（法线贴图、粗糙度贴图等），画面接近现实。
4. **移动效果流畅**。玩家移动和相机切换都带有平滑插值效果，运动自然，避免了生硬的跳转。

## 需完善的方面：
1. 迷宫的布局为硬编码，无法修改。可使用相应的迷宫生成等算法每次游戏开始动态地随机地生成新的迷宫。
2. 昼夜循环系统只模拟了每日不同时间段日光和天空的变化，没有绘制出夜晚的月亮星星。而且虽然设置了太阳，由于天空的参数设置不当，白昼时天空的光亮太盛，常常会看不清太阳。
3. 玩家的操作可以进一步细化。比如可以增加按空格跳跃的功能和长按w奔跑的动作增加游戏趣味性。而且有时玩家撞上了墙壁，因为没有碰撞提示，玩家不知道是因为撞到了墙壁所以程序没有反馈，可能会误以为程序出了BUG。这会打消玩家的积极性。
4. 键盘输入有100ms的冷却期，在点按转向键时正合适，但在连续点按w键前进时，会使玩家有不连续感。可以单独在连续输入w时，取消100ms限制。

## 未实现的功能：
1. 没有计时、排行榜等功能，提升游戏竞争性。
2. 没有迷雾小地图，记录玩家已走过的轨迹，增加玩家探索地图的新奇感，并减少游戏的难度。
3. 迷宫的道路过于单调，未加入动态障碍物等设置增加游戏的趣味性。
4. 没有快速通关功能，可以使用深度优先搜索算法搜索出一条通关路径，然后使通关路径的地面变色以指引玩家通关。

